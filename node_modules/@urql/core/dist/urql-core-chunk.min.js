var e=require("@0no-co/graphql.web"),r=require("wonka"),t=r=>r&&"string"==typeof r.message&&(r.extensions||"GraphQLError"===r.name)?r:"object"==typeof r&&"string"==typeof r.message?new e.GraphQLError(r.message,r.nodes,r.source,r.positions,r.path,r,r.extensions||{}):new e.GraphQLError(r);class n extends Error{constructor(e){var r=(e.graphQLErrors||[]).map(t),n=((e,r)=>{var t="";if(e)return`[Network] ${e.message}`;if(r)for(var n=0,a=r.length;n<a;n++)t&&(t+="\n"),t+=`[GraphQL] ${r[n].message}`;return t})(e.networkError,r);super(n),this.name="CombinedError",this.message=n,this.graphQLErrors=r,this.networkError=e.networkError,this.response=e.response}toString(){return this.message}}var a=(e,r)=>{for(var t=0|(r||5381),n=0,a=0|e.length;n<a;n++)t=(t<<5)+t+e.charCodeAt(n);return t},o=new Set,s=new WeakMap,i=(e,r)=>{if(null===e||o.has(e))return"null";if("object"!=typeof e)return JSON.stringify(e)||"";if(e.toJSON)return i(e.toJSON(),r);if(Array.isArray(e)){for(var t="[",n=0,a=e.length;n<a;n++)t.length>1&&(t+=","),t+=i(e[n],r)||"null";return t+"]"}if(!r&&(f!==c&&e instanceof f||p!==c&&e instanceof p))return"null";var d=Object.keys(e).sort();if(!d.length&&e.constructor&&Object.getPrototypeOf(e).constructor!==Object.prototype.constructor){var l=s.get(e)||Math.random().toString(36).slice(2);return s.set(e,l),i({__key:l},r)}o.add(e);for(var u="{",y=0,h=d.length;y<h;y++){var v=i(e[d[y]],r);v&&(u.length>1&&(u+=","),u+=i(d[y],r)+":"+v)}return o.delete(e),u+"}"},d=(e,r,t)=>{if(null==t||"object"!=typeof t||t.toJSON||o.has(t));else if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)d(e,`${r}.${n}`,t[n]);else if(t instanceof f||t instanceof p)e.set(r,t);else for(var s in o.add(t),t)d(e,`${r}.${s}`,t[s])},l=(e,r)=>(o.clear(),i(e,r||!1));class c{}var f="undefined"!=typeof File?File:c,p="undefined"!=typeof Blob?Blob:c,u=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,y=/(?:#[^\n\r]+)?(?:[\r\n]+|$)/g,h=(e,r)=>r%2==0?e.replace(y,"\n"):e,v=e=>e.split(u).map(h).join("").trim(),x=new Map,g=new Map,m=r=>{var t;return"string"==typeof r?t=v(r):r.loc&&g.get(r.__key)===r?t=r.loc.source.body:(t=x.get(r)||v(e.print(r)),x.set(r,t)),"string"==typeof r||r.loc||(r.loc={start:0,end:t.length,source:{body:t,name:"gql",locationOffset:{line:1,column:1}}}),t},w=e=>{var r;if(e.documentId)r=a(e.documentId);else if(r=a(m(e)),e.definitions){var t=O(e);t&&(r=a(`\n# ${t}`,r))}return r},b=r=>{var t,n;return"string"==typeof r?(t=w(r),n=g.get(t)||e.parse(r,{noLocation:!0})):(t=r.__key||w(r),n=g.get(t)||r),n.loc||m(n),n.__key=t,g.set(t,n),n},O=r=>{for(var t=0,n=r.definitions.length;t<n;t++){var a=r.definitions[t];if(a.kind===e.Kind.OPERATION_DEFINITION)return a.name?a.name.value:void 0}},k=(e,r,t)=>{if(!("data"in r||"errors"in r&&Array.isArray(r.errors)))throw new Error("No Content");var a="subscription"===e.kind;return{operation:e,data:r.data,error:Array.isArray(r.errors)?new n({graphQLErrors:r.errors,response:t}):void 0,extensions:r.extensions?{...r.extensions}:void 0,hasNext:null==r.hasNext?a:r.hasNext,stale:!1}},N=(e,r)=>{if("object"==typeof e&&null!=e){if(Array.isArray(e)){e=[...e];for(var t=0,n=r.length;t<n;t++)e[t]=N(e[t],r[t]);return e}if(!e.constructor||e.constructor===Object){for(var a in e={...e},r)e[a]=N(e[a],r[a]);return e}}return r},E=(e,r,t,a)=>{var o=e.error?e.error.graphQLErrors:[],s=!!e.extensions||!!(r.payload||r).extensions,i={...e.extensions,...(r.payload||r).extensions},d=r.incremental;"path"in r&&(d=[r]);var l={data:e.data};if(d)for(var c=function(){var e=d[f];Array.isArray(e.errors)&&o.push(...e.errors),e.extensions&&(Object.assign(i,e.extensions),s=!0);var r="data",t=l,n=[];if(e.path)n=e.path;else if(a){var c=a.find((r=>r.id===e.id));n=e.subPath?[...c.path,...e.subPath]:c.path}for(var p=0,u=n.length;p<u;r=n[p++])t=t[r]=Array.isArray(t[r])?[...t[r]]:{...t[r]};if(e.items)for(var y=+r>=0?r:0,h=0,v=e.items.length;h<v;h++)t[y+h]=N(t[y+h],e.items[h]);else void 0!==e.data&&(t[r]=N(t[r],e.data))},f=0,p=d.length;f<p;f++)c();else l.data=(r.payload||r).data||e.data,o=r.errors||r.payload&&r.payload.errors||o;return{operation:e.operation,data:l.data,error:o.length?new n({graphQLErrors:o,response:t}):void 0,extensions:s?i:void 0,hasNext:null!=r.hasNext?r.hasNext:e.hasNext,stale:!1}},A=(e,r,t)=>({operation:e,data:void 0,error:new n({networkError:r,response:t}),extensions:void 0,hasNext:!1,stale:!1}),q="undefined"!=typeof TextDecoder?new TextDecoder:null,S=/boundary="?([^=";]+)"?/i,j=/data: ?([^\n]+)/,I=e=>"Buffer"===e.constructor.name?e.toString():q.decode(e);async function*L(e){if(e.body[Symbol.asyncIterator])for await(var r of e.body)yield I(r);else{var t,n=e.body.getReader();try{for(;!(t=await n.read()).done;)yield I(t.value)}finally{n.cancel()}}}async function*T(e,r){var t,n="";for await(var a of e)for(n+=a;(t=n.indexOf(r))>-1;)yield n.slice(0,t),n=n.slice(t+r.length)}exports.CombinedError=n,exports.createRequest=(e,r,t)=>{var n=r||{},o=b(e),s=l(n,!0),i=o.__key;return"{}"!==s&&(i=a(s,i)),{key:i,query:o,variables:n,extensions:t}},exports.getOperationType=r=>{for(var t=0,n=r.definitions.length;t<n;t++){var a=r.definitions[t];if(a.kind===e.Kind.OPERATION_DEFINITION)return a.operation}},exports.keyDocument=b,exports.makeErrorResult=A,exports.makeFetchBody=function(e){var r={query:void 0,documentId:void 0,operationName:O(e.query),variables:e.variables||void 0,extensions:e.extensions};return!("documentId"in e.query)||!e.query.documentId||e.query.definitions&&e.query.definitions.length?e.extensions&&e.extensions.persistedQuery&&!e.extensions.persistedQuery.miss||(r.query=m(e.query)):r.documentId=e.query.documentId,r},exports.makeFetchOptions=(e,r)=>{var t={accept:"subscription"===e.kind?"text/event-stream, multipart/mixed":"application/graphql-response+json, application/graphql+json, application/json, text/event-stream, multipart/mixed"},n=("function"==typeof e.context.fetchOptions?e.context.fetchOptions():e.context.fetchOptions)||{};if(n.headers)if((e=>"has"in e&&!Object.keys(e).length)(n.headers))n.headers.forEach(((e,r)=>{t[r]=e}));else if(Array.isArray(n.headers))n.headers.forEach(((e,r)=>{Array.isArray(e)?t[e[0]]=t[e[0]]?`${t[e[0]]},${e[1]}`:e[1]:t[r]=e}));else for(var a in n.headers)t[a.toLowerCase()]=n.headers[a];var s=((e,r)=>{var t,n;if(r&&("query"!==e.kind||!e.context.preferGetMethod)){var a=l(r),s=(t=r.variables,n=new Map,f===c&&p===c||(o.clear(),d(n,"variables",t)),n);if(s.size){var i=new FormData;i.append("operations",a),i.append("map",l({...[...s.keys()].map((e=>[e]))}));var u=0;for(var y of s.values())i.append(""+u++,y);return i}return a}})(e,r);return"string"!=typeof s||t["content-type"]||(t["content-type"]="application/json"),{...n,method:s?"POST":"GET",body:s,headers:t}},exports.makeFetchSource=function(e,t,n){var a;return"undefined"!=typeof AbortController&&(n.signal=(a=new AbortController).signal),r.onEnd((()=>{a&&a.abort()}))(r.filter((e=>!!e))(r.fromAsyncIterable(async function*(e,r,t){var n,a=!0,o=null;try{yield await Promise.resolve();var s,i,d=(n=await(e.context.fetch||fetch)(r,t)).headers.get("Content-Type")||"";for await(var l of(s=/multipart\/mixed/i.test(d)?async function*(e,r){var t,n=e.match(S),a="--"+(n?n[1]:"-"),o=!0;for await(var s of T(L(r),"\r\n"+a)){if(o){o=!1;var i=s.indexOf(a);if(!(i>-1))continue;s=s.slice(i+a.length)}try{yield t=JSON.parse(s.slice(s.indexOf("\r\n\r\n")+4))}catch(e){if(!t)throw e}if(t&&!1===t.hasNext)break}t&&!1!==t.hasNext&&(yield{hasNext:!1})}(d,n):/text\/event-stream/i.test(d)?async function*(e){var r;for await(var t of T(L(e),"\n\n")){var n=t.match(j);if(n){var a=n[1];try{yield r=JSON.parse(a)}catch(e){if(!r)throw e}if(r&&!1===r.hasNext)break}}r&&!1!==r.hasNext&&(yield{hasNext:!1})}(n):/text\//i.test(d)?async function*(e){var r=await e.text();try{var t=JSON.parse(r);yield t}catch(e){throw new Error(r)}}(n):async function*(e){yield JSON.parse(await e.text())}(n),s))l.pending&&!o?i=l.pending:l.pending&&(i=[...i,...l.pending]),o=o?E(o,l,n,i):k(e,l,n),a=!1,yield o,a=!0;o||(yield o=k(e,{},n))}catch(r){if(!a)throw r;yield A(e,n&&(n.status<200||n.status>=300)&&n.statusText?new Error(n.statusText):r,n)}}(e,t,n))))},exports.makeFetchURL=(e,r)=>{var t="query"===e.kind&&e.context.preferGetMethod;if(!t||!r)return e.context.url;var n,a,o=(a=(n=e.context.url).indexOf("?"))>-1?[n.slice(0,a),new URLSearchParams(n.slice(a+1))]:[n,new URLSearchParams];for(var s in r){var i=r[s];i&&o[1].set(s,"object"==typeof i?l(i):i)}var d=o.join("?");return d.length>2047&&"force"!==t?(e.context.preferGetMethod=!1,e.context.url):d},exports.makeResult=k,exports.mergeResultPatch=E,exports.stringifyDocument=m,exports.stringifyVariables=l;
//# sourceMappingURL=urql-core-chunk.min.js.map
